import { jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";
// src/components/layout/Header.tsx
import React, { useState, useRef, useEffect } from 'react';
import './Header.css';
export const Header = ({ isSidebarCollapsed, onSidebarToggle, breadcrumbs = [], notifications = [], onNotificationClick, onLogout, user, }) => {
    const [showNotifications, setShowNotifications] = useState(false);
    const [showUserMenu, setShowUserMenu] = useState(false);
    const notificationRef = useRef(null);
    const userMenuRef = useRef(null);
    const unreadCount = notifications.filter((n) => !n.read).length;
    useEffect(() => {
        const handleClickOutside = (event) => {
            if (notificationRef.current && !notificationRef.current.contains(event.target)) {
                setShowNotifications(false);
            }
            if (userMenuRef.current && !userMenuRef.current.contains(event.target)) {
                setShowUserMenu(false);
            }
        };
        document.addEventListener('mousedown', handleClickOutside);
        return () => document.removeEventListener('mousedown', handleClickOutside);
    }, []);
    return (_jsxs("header", { className: "header", children: [_jsxs("div", { className: "header-left", children: [_jsx("button", { className: "header-menu-btn", onClick: onSidebarToggle, "aria-label": "Toggle menu", children: _jsx("svg", { width: "24", height: "24", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", children: _jsx("path", { d: "M3 12h18M3 6h18M3 18h18" }) }) }), breadcrumbs.length > 0 && (_jsx("nav", { className: "breadcrumbs", children: breadcrumbs.map((crumb, index) => (_jsxs(React.Fragment, { children: [index > 0 && _jsx("span", { className: "breadcrumb-separator", children: "/" }), crumb.path ? (_jsx("a", { href: crumb.path, className: "breadcrumb-link", children: crumb.label })) : (_jsx("span", { className: "breadcrumb-current", children: crumb.label }))] }, index))) }))] }), _jsxs("div", { className: "header-right", children: [_jsxs("div", { className: "header-notifications", ref: notificationRef, children: [_jsxs("button", { className: "header-icon-btn", onClick: () => setShowNotifications(!showNotifications), "aria-label": "Notifications", children: [_jsx("svg", { width: "20", height: "20", viewBox: "0 0 20 20", fill: "none", stroke: "currentColor", strokeWidth: "2", children: _jsx("path", { d: "M15 6.5C15 5.17 14.33 3.92 13.24 3.17C12.15 2.42 10.77 2.25 9.53 2.71C8.29 3.17 7.29 4.21 6.83 5.52C6.37 6.83 6.5 8.29 7.17 9.48L6 10.65V12.5H7.85L9 11.35C10.19 12.02 11.65 12.15 12.96 11.69C14.27 11.23 15.31 10.23 15.77 8.99C16.23 7.75 16.06 6.37 15.31 5.28" }) }), unreadCount > 0 && _jsx("span", { className: "header-badge", children: unreadCount })] }), showNotifications && (_jsxs("div", { className: "header-dropdown notification-dropdown", children: [_jsxs("div", { className: "dropdown-header", children: [_jsx("h3", { children: "Notifications" }), unreadCount > 0 && _jsxs("span", { className: "notification-count", children: [unreadCount, " new"] })] }), _jsx("div", { className: "dropdown-body", children: notifications.length > 0 ? (notifications.map((notification) => (_jsxs("button", { className: `notification-item ${notification.read ? 'read' : ''}`, onClick: () => {
                                                onNotificationClick?.(notification.id);
                                                setShowNotifications(false);
                                            }, children: [_jsxs("div", { className: "notification-content", children: [_jsx("div", { className: "notification-title", children: notification.title }), _jsx("div", { className: "notification-message", children: notification.message }), _jsx("div", { className: "notification-time", children: notification.time })] }), !notification.read && _jsx("span", { className: "notification-dot" })] }, notification.id)))) : (_jsxs("div", { className: "dropdown-empty", children: [_jsx("svg", { width: "48", height: "48", viewBox: "0 0 48 48", fill: "none", stroke: "currentColor", strokeWidth: "2", children: _jsx("path", { d: "M24 8v16l8 8M44 24c0 11.05-8.95 20-20 20S4 35.05 4 24 12.95 4 24 4s20 8.95 20 20z" }) }), _jsx("p", { children: "No notifications" })] })) })] }))] }), user && (_jsxs("div", { className: "header-user", ref: userMenuRef, children: [_jsxs("button", { className: "header-user-btn", onClick: () => setShowUserMenu(!showUserMenu), "aria-label": "User menu", children: [_jsx("div", { className: "header-user-avatar", children: user.avatar ? (_jsx("img", { src: user.avatar, alt: user.name })) : (_jsx("span", { children: user.name.charAt(0).toUpperCase() })) }), _jsx("span", { className: "header-user-name", children: user.name }), _jsx("svg", { className: `header-user-arrow ${showUserMenu ? 'open' : ''}`, width: "16", height: "16", viewBox: "0 0 16 16", fill: "none", stroke: "currentColor", strokeWidth: "2", children: _jsx("path", { d: "M4 6l4 4 4-4" }) })] }), showUserMenu && (_jsxs("div", { className: "header-dropdown user-dropdown", children: [_jsxs("div", { className: "dropdown-user-info", children: [_jsx("div", { className: "dropdown-user-name", children: user.name }), _jsx("div", { className: "dropdown-user-email", children: user.email })] }), _jsx("div", { className: "dropdown-divider" }), _jsxs("button", { className: "dropdown-item", children: [_jsxs("svg", { width: "18", height: "18", viewBox: "0 0 18 18", fill: "none", stroke: "currentColor", strokeWidth: "2", children: [_jsx("path", { d: "M9 11.25a2.25 2.25 0 100-4.5 2.25 2.25 0 000 4.5z" }), _jsx("path", { d: "M14.25 9c0 .83-.17 1.62-.47 2.34l1.27 1.27-1.06 1.06-1.27-1.27A5.23 5.23 0 019 14.25a5.23 5.23 0 01-3.72-1.85l-1.27 1.27-1.06-1.06 1.27-1.27A5.23 5.23 0 013.75 9c0-.83.17-1.62.47-2.34L2.95 5.39l1.06-1.06 1.27 1.27A5.23 5.23 0 019 3.75c1.39 0 2.66.54 3.72 1.85l1.27-1.27 1.06 1.06-1.27 1.27c.3.72.47 1.51.47 2.34z" })] }), _jsx("span", { children: "Settings" })] }), _jsxs("button", { className: "dropdown-item", children: [_jsx("svg", { width: "18", height: "18", viewBox: "0 0 18 18", fill: "none", stroke: "currentColor", strokeWidth: "2", children: _jsx("path", { d: "M9 11.25V9M9 6.75h.0075M15.75 9a6.75 6.75 0 11-13.5 0 6.75 6.75 0 0113.5 0z" }) }), _jsx("span", { children: "Help" })] }), _jsx("div", { className: "dropdown-divider" }), _jsxs("button", { className: "dropdown-item dropdown-item-danger", onClick: onLogout, children: [_jsx("svg", { width: "18", height: "18", viewBox: "0 0 18 18", fill: "none", stroke: "currentColor", strokeWidth: "2", children: _jsx("path", { d: "M11.25 12.75L14.25 9.75 11.25 6.75M14.25 9.75H6.75M6.75 3.75H5.25A1.5 1.5 0 003.75 5.25v7.5a1.5 1.5 0 001.5 1.5h1.5" }) }), _jsx("span", { children: "Logout" })] })] }))] }))] })] }));
};
